<!-- Custom style sheet link -->
<link rel="stylesheet" href="/a11y-annotations/assets/styles/custom.css">

<!-- sidebar-navigation.html -->
<nav id="sidebar-nav" class="sidebar">
    <a href="/index.html" class="d-flex align-items-center pb-3 mb-3 link-dark text-decoration-none border-bottom">
        <span class="fs-5 fw-semibold"><i class="bi bi-house-heart-fill" aria-hidden="true"></i> A11y Annotations</span>
    </a>
    <a href="/default/how-to-annotate.html" class="d-flex align-items-center pb-1 pl-1 mb-3 link-dark text-decoration-none">
        <span class="fs-6 fw-semibold">How to Annotate</span>
    </a>
    <a href="/default/auditor-checklist.html" class="d-flex align-items-center pb-1 pl-1 mb-3 link-dark text-decoration-none">
        <span class="fs-6 fw-semibold">Auditor Checklist</span>
    </a>
    <!-- <a href="/default/style-guide.html" class="d-flex align-items-center pb-1 pl-1 mb-3 link-dark text-decoration-none">
        <span class="fs-6 fw-semibold">Style Guide</span>
    </a> -->
    <ul class="list-unstyled ps-0">
        <!-- General Section -->
        <li class="mb-3">
            <button class="btn btn-toggle align-items-center rounded collapsed fs-4" data-bs-toggle="collapse"
                data-bs-target="#general-collapse" aria-expanded="false">
                General
            </button>
            <div class="collapse" id="general-collapse">
                <ul class="btn-toggle-nav list-unstyled fw-normal pb-2 small  ml-1r">
                    <!-- Nested Accessibility Criteria Sections -->
                    <!-- Structure Section -->
                    <li class="mb-1">
                        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse"
                            data-bs-target="#structure-collapse" aria-expanded="true" aria-controls="structure-collapse">
                            <span><i class="bi bi-hammer" aria-hidden="true"></i> Structure</span>
                        </button>
                        <div class="collapse show" id="structure-collapse">
                            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                <li><a href="/templates/general/structure/page.html" class="link-dark rounded">Page</a></li>
                                <li><a href="/templates/general/structure/text-best-practices.html" class="link-dark rounded">Text</a></li>
                                <li><a href="/templates/general/structure/landmarks.html" class="link-dark rounded">Landmarks</a></li>
                                <li><a href="/templates/general/structure/headings.html" class="link-dark rounded">Headings</a></li>
                                <li><a href="/templates/general/structure/lists.html" class="link-dark rounded">Lists</a></li>
                            </ul>
                        </div>
                    </li>                               
                    <!-- Color Section -->
                    <li class="mb-1">
                        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse"
                            data-bs-target="#color-collapse" aria-expanded="true" aria-controls="color-collapse">
                            <span><i class="bi bi-eyedropper" aria-hidden="true"></i> Color</span>
                        </button>
                        <div class="collapse show" id="color-collapse">
                            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                <li><a href="/templates/general/color/use-of-color.html" class="link-dark rounded">Use of Color</a></li>
                                <li><a href="/templates/general/color/text-contrast.html" class="link-dark rounded">Text Color Contrast</a></li>
                                <li><a href="/templates/general/color/non-text-contrast.html" class="link-dark rounded">Non-text Color Contrast</a></li>
                            </ul>
                        </div>
                    </li>
                    <!-- Non-text Content Section -->
                    <li class="mb-1">
                        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse"
                            data-bs-target="#images-collapse" aria-expanded="true" aria-controls="images-collapse">
                            <span><i class="bi bi-images" aria-hidden="true"></i> Non-text Content</span>
                        </button>
                        <div class="collapse show" id="images-collapse">
                            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                <li><a href="/templates/general/non-text-content/images.html" class="link-dark rounded">Images</a></li>
                                <li><a href="/templates/general/non-text-content/images-of-text.html" class="link-dark rounded">Images of Text</a></li>
                                <li><a href="/templates/general/non-text-content/media.html" class="link-dark rounded">Time-based Media</a></li>
                                <li><a href="/templates/general/non-text-content/timing-adjustable.html" class="link-dark rounded">Timing Adjustable</a></li> 
                                <li><a href="/templates/general/non-text-content/pause-stop-hide.html" class="link-dark rounded">Pause, Stop, Hide</a></li>
                                <li><a href="/templates/general/non-text-content/three-flashes.html" class="link-dark rounded">Three Flashes or Below Threshold</a></li>  
                            </ul>
                        </div>
                    </li>
                    <!-- Interactives Section -->
                    <li class="mb-1">
                        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse"
                            data-bs-target="#interactives-collapse" aria-expanded="true" aria-controls="interactives-collapse">
                            <span><i class="bi bi-hand-index-thumb" aria-hidden="true"></i> Interactives</span>
                        </button>
                        <div class="collapse show" id="interactives-collapse">
                            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                <li><a href="/templates/general/interactives/keyboard.html" class="link-dark rounded">Keyboard</a></li>
                                <li><a href="/templates/general/interactives/focus-visible.html" class="link-dark rounded">Focus Visible</a></li>
                                <li><a href="/templates/general/interactives/focus-order.html" class="link-dark rounded">Focus Order</a></li>
                                <li><a href="/templates/general/interactives/on-focus.html" class="link-dark rounded">On Focus</a></li>
                                <li><a href="/templates/general/interactives/on-input.html" class="link-dark rounded">On Input</a></li>
                                <li><a href="/templates/general/interactives/dynamic-changes.html" class="link-dark rounded">Dynamic Changes</a></li>
                                <li><a href="/templates/general/interactives/hover-or-focus.html" class="link-dark rounded">Content on Hover or Focus</a></li>
                                <li><a href="/templates/general/interactives/touch-target.html" class="link-dark rounded">Target Size</a></li>
                            </ul>
                        </div>
                    </li>
                    <!-- Screen Magnification Section -->
                    <li class="mb-1">
                        <button class="text-left btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse"
                            data-bs-target="#screen-magnification-collapse" aria-expanded="true" aria-controls="screen-magnification-collapse">
                            <span><i class="bi bi-search-heart" aria-hidden="true"></i> Screen Magnification</span>
                        </button>
                        <div class="collapse show" id="screen-magnification-collapse">
                            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">                                
                                <li><a href="/templates/general/screen-magnification/resize.html" class="link-dark rounded">Resize Text</a></li>
                                <li><a href="/templates/general/screen-magnification/reflow.html" class="link-dark rounded">Reflow</a></li> 
                                <li><a href="/templates/general/screen-magnification/text-spacing.html" class="link-dark rounded">Text Spacing</a></li>   
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </li>
        <li class="border-top my-3"></li>
        <li class="mb-1">
            <button class="btn btn-toggle align-items-center rounded collapsed fs-4 mb-1" data-bs-toggle="collapse"
                data-bs-target="#dashboard-collapse" aria-expanded="false">
                Components
            </button>
            <div class="collapse" id="dashboard-collapse">
                <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small ml-1r">
                    <li><a href="/templates/components/accordion.html" class="link-dark rounded">Accordion</a></li>
                    <li><a href="/templates/components/alert.html" class="link-dark rounded">Alert</a></li>
                    <li><a href="/templates/components/breadcrumb.html" class="link-dark rounded">Breadcrumb</a></li>
                    <li><a href="/templates/components/button.html" class="link-dark rounded">Button</a></li>
                    <li><a href="/templates/components/carousel.html" class="link-dark rounded">Carousel</a></li>
                    <li><a href="/templates/components/dialog-modal.html" class="link-dark rounded">Dialog (Modal)</a></li>
                    <li><a href="/templates/components/dropdown.html" class="link-dark rounded">Dropdown / Disclosure</a></li>
                    <li><a href="/templates/components/forms.html" class="link-dark rounded">Form</a></li>
                    <li><a href="/templates/components/form-group.html" class="link-dark rounded">Form Group</a></li>
                    <li><a href="/templates/components/links.html" class="link-dark rounded">Link</a></li>
                    <li><a href="#" class="link-dark rounded">Media Object</a></li>
                    <li><a href="/templates/components/navigation.html" class="link-dark rounded">Navigation</a></li>
                    <li><a href="/templates/components/pagination.html" class="link-dark rounded">Pagination</a></li>
                    <li><a href="/templates/components/progress.html" class="link-dark rounded">Progress</a></li>
                    <li><a href="/templates/components/tables.html" class="link-dark rounded">Table</a></li> 
                    <li><a href="/templates/components/tabs.html" class="link-dark rounded">Tabs</a></li>
                    <li><a href="/templates/components/tooltip.html" class="link-dark rounded">Tooltip</a></li>
                    <li><a href="/templates/components/toggletip.html" class="link-dark rounded">Toggletip</a></li>
                    <li><a href="#" class="link-dark rounded">Video</a></li>
                </ul>
            </div>
        </li>
        <li class="border-top my-3"></li>
        <li class="mb-1">
            <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse"
                data-bs-target="#resources-collapse" aria-expanded="false" aria-controls="resources-collapse">
                Resources
            </button>
            <div class="collapse" id="resources-collapse">
                <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                    <li><a href="/templates/resources/general-resources.html" class="link-dark rounded">General Accessibility</a></li>
                    <li><a href="/templates/resources/design-resources.html" class="link-dark rounded">Design</a></li>
                    <li><a href="/templates/resources/development-resources.html" class="link-dark rounded">Development and Testing</a></li>
                    <li><a href="#" class="link-dark rounded">Courses and Educational</a></li>
                    <li><a href="#" class="link-dark rounded">Government</a></li>
                    <li><a href="#" class="link-dark rounded">Misc</a></li>
                </ul>
            </div>
        </li>
    </ul>
</nav>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  // Sidebar Focus Management
  $(window).on('load', function() {

      // Get current URL path without query or hash
      var currentPath = window.location.pathname;

      // Find the matching link in the sidebar
      $('#sidebar-nav a').each(function() {
          var hrefValue = $(this).attr('href');
          var linkPath = new URL(hrefValue, window.location.origin).pathname;

          // Check if the normalized current path matches the normalized link path
          if (currentPath === linkPath) {

              // Set focus and ARIA current attribute on the matching link
              // Using setTimeout to ensure that focus is called after other document ready scripts
              setTimeout(() => $(this).focus(), 0);

              // Add aria-current attribute
              $(this).attr('aria-current', 'page');

              // Check if icon exists, if not append it
              if ($(this).find('i.bi-caret-left-fill').length === 0) {
                  $(this).append('<i class="bi bi-caret-left-fill text-success" aria-hidden="true"></i>');
              }

              // Ensure all parent collapsible elements are expanded
              $(this).parents('.collapse').each(function() {
                  var targetId = $(this).attr('id');
                  if (!$(this).hasClass('show')) {
                      $(this).addClass('show');
                      $('button[data-bs-target="#' + targetId + '"]')
                          .attr('aria-expanded', 'true')
                          .removeClass('collapsed');
                  }
              });

              // Scroll the focused element into view if necessary
              var elementOffset = $(this).offset().top;
              if (elementOffset > $(window).height()) {
                  $('html, body').animate({
                      scrollTop: elementOffset
                  }, 1000);
              }

              return false; // Exit the loop after the first match
          }
      });
  });
</script>




<!-- Comment out for local development and enable for production  -->
<script>
    $(document).ready(function() {
        // Select all links in the sidebar navigation except for index.html
        $("#sidebar-nav a").each(function() {
            // Get the current href attribute
            var currentHref = $(this).attr("href");
            
            // Add "/a11y-annotations" to the beginning of the href attribute
            var newHref = "/a11y-annotations" + currentHref;
            
            // Update the href attribute with the new value
            $(this).attr("href", newHref);
        });
    });
    $(document).ready(function() {
        // Select all <img> tags on the page
        $('img').each(function() {
            // Get the current src attribute
            var currentSrc = $(this).attr('src');
            
            // Check if the src attribute starts with '/'
            if (currentSrc && currentSrc.charAt(0) === '/') {
            // Add '/a11y-annotations' to the beginning of the src attribute
            $(this).attr('src', '/a11y-annotations' + currentSrc);
            }
        });
    });
</script>
